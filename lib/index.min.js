!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var s="object"==typeof exports?t(require("react")):t(e.react);for(var r in s)("object"==typeof exports?exports:e)[r]=s[r]}}("undefined"!=typeof self?self:this,function(e){return function(e){var t={};function s(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/lib/",s(s.s=11)}([function(t,s){t.exports=e},function(e,t,s){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var s={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var n=a.apply(null,r);n&&e.push(n)}else if("object"===o)for(var i in r)s.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}void 0!==e&&e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t,s){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},function(e,t){function s(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),o=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),i=s(12),l=s(1),u=function(e){function t(t){var s=e.call(this,t)||this;return s.state={mouseOverLastSeenContainer:!1},s}return a(t,e),t.prototype.render=function(){var e=this;if(!this.props.message)return null;var t=this.props,s=t.lastSeenAvatarStyles,r=t.yourAuthorId,a=t.styles,u=t.classes,c=t.lastSeenAvatarClasses;u||(u={}),a||(a={});var p=a.userChatBubble,h=a.chatBubble,d=a.text,f=a.userText,b=a.recipientText,g=a.recipientChatBubble,y=a.firstChatBubbleInGroup,m=a.userFirstChatBubbleInGroup,v=a.recipientFirstChatBubbleInGroup,_=a.centerChatBubbleInGroup,C=a.userCenterChatBubbleInGroup,O=a.recipientCenterChatBubbleInGroup,S=a.lastChatBubbleInGroup,w=a.userLastChatBubbleInGroup,A=a.recipientLastChatBubbleInGroup,B=a.userChatBubbleOrientationNormal,M=a.recipientChatBubbleOrientationNormal,L=a.chatBubbleWrapper,x=a.createdOn,T=a.userCreatedOn,I=a.recipientCreatedOn,j=a.isSendIconColor,R=a.loadingSpinnerColor,P=a.lastSeenByContainer,E=this.props.message.authorId===r,G=o({},i.default.chatBubble,h,this.props.style,E?i.default.userChatBubble:i.default.recipientChatBubble,E?p:g,E?i.default.userChatBubbleOrientationNormal:i.default.recipientChatBubbleOrientationNormal,E?B:M,this.props.isFirstInGroup&&i.default.firstChatBubbleInGroup,this.props.isFirstInGroup&&(E?i.default.userFirstChatBubbleInGroup:i.default.recipientFirstChatBubbleInGroup),this.props.isCenterInGroup&&i.default.centerChatBubbleInGroup,this.props.isCenterInGroup&&(E?i.default.userCenterChatBubbleInGroup:i.default.recipientCenterChatBubbleInGroup),this.props.isLastInGroup&&i.default.lastChatBubbleInGroup,this.props.isLastInGroup&&(E?i.default.userLastChatBubbleInGroup:i.default.recipientLastChatBubbleInGroup),this.props.isFirstInGroup&&y,this.props.isFirstInGroup&&(E?m:v),this.props.isCenterInGroup&&_,this.props.isCenterInGroup&&(E?C:O),this.props.isLastInGroup&&S,this.props.isLastInGroup&&(E?w:A));return n.createElement("div",{style:o({},i.default.chatBubbleWrapper,L),className:l.default("react-bell-chat__chat-bubble__wrapper",this.props.className,u.chatBubbleWrapper)},n.createElement("div",{style:o({},G),className:l.default("react-bell-chat__chat-bubble",this.props.className,u.chatBubble)},n.createElement("span",{style:o({},i.default.text,d,E?f:b),className:l.default("react-bell-chat__chat-bubble__text",u.text,E?u.userText:u.recipientText)},this.props.message.message),this.props.message.createdOn&&n.createElement("span",{style:o({},i.default.createdOn,x,E?i.default.userCreatedOn:i.default.recipientCreatedOn,E?T:I),className:l.default("react-bell-chat__chat-bubble__created-on",u.createdOn,E?u.userCreatedOn:u.recipientCreatedOn),title:this.props.message.createdOn.toLocaleString()},this.props.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),void 0!==this.props.message.isSend&&E&&n.createElement("span",{style:o({},i.default.isSend),className:l.default("react-bell-chat__chat-bubble__is-send",u.isSend),title:this.props.message.isSend?"Send":"Sending"},this.props.message.isSend?n.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},n.createElement("path",o({fill:j||i.default.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):n.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}},n.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:R||i.default.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},n.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),this.props.showRecipientLastSeenMessage&&this.props.lastSeenByAuthors&&this.props.lastSeenByAuthors.length>0&&this.props.customLastSeenAvatar&&n.createElement("div",{style:o({},i.default.lastSeenByContainer,P),className:l.default("react-bell-chat__chat-bubble__last-seen-by__container",u.lastSeenByContainer),onMouseEnter:function(){return e.setState({mouseOverLastSeenContainer:!0})},onMouseLeave:function(){return e.setState({mouseOverLastSeenContainer:!1})},title:"Last seen by "+this.props.lastSeenByAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")},this.props.lastSeenByAuthors.map(function(t,r){return n.createElement(e.props.customLastSeenAvatar,{key:r,author:t,styles:o({},s,{container:o({},s?s.container:{},r>0&&!e.state.mouseOverLastSeenContainer?{marginTop:-12}:{marginTop:-4})}),classes:c})})))},t}(n.Component);t.default=u},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={position:"absolute",left:-50,top:0,width:40,height:40,lineHeight:"40px",fontWeight:400,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:20,textAlign:"center",borderTopRightRadius:5},i={pointerEvents:"none"};t.default=function(e){var t=e.author,s=e.classes,l=e.className;return t&&a.createElement("div",{style:r({},n,e.styles&&e.styles.container,e.style),title:t.name,className:o.default("react-bell-chat__avatar",s&&s.container,l)},a.createElement("span",{style:r({},i,e.styles&&e.styles.text),className:o.default("react-bell-chat__avatar__text",s&&s.text)},t.avatarName?t.avatarName:t.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase().substr(0,3)))}},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={systemChatBubbleContainer:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}};t.default=function(e){var t=e.styles,s=e.classes;t||(t={}),s||(s={});var i=t.systemChatBubbleContainer,l=t.systemChatBubbleText,u=e.message.createdOn&&e.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return e.message&&a.createElement("div",{className:o.default("react-bell-chat__chat-bubble react-bell-chat__chat-bubble--system",e.className,s.chatBubble),style:r({},n.systemChatBubbleContainer,i,e.style)},u&&a.createElement("span",{className:o.default("react-bell-chat__chat-bubble--system__created-on",s.createdOn),title:e.message.createdOn.toLocaleString(),style:r({},n.systemChatBubbleText,l)},u,":"," "),e.message.message)}},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"};t.default=function(e){var t=e.styles,s=e.classes;t||(t={}),s||(s={});var i=t.container;return e.typingAuthors&&e.typingAuthors.length>0&&a.createElement("div",{className:o.default("react-bell-chat__is-typing__container",e.className,s.container),style:r({},n,i,e.style)},e.typingAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing")}},function(e,t,s){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},function(e,t){function s(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),o=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),i=s(1),l={overflow:"auto",padding:"0 10px"},u=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,s=t.styles,r=t.classes;s||(s={}),r||(r={});var a=s.container;return n.createElement("div",{ref:function(t){e.scrollContainer=t,e.props.apiRef&&e.props.apiRef({scrollToBottom:function(e){return void 0===e&&(e="auto"),t&&(t.scrollTo?t.scrollTo({top:t.scrollHeight,behavior:e}):t.scrollTop=t.scrollHeight)},scrollTo:function(e){return t&&(t.scrollTo?t.scrollTo({top:e}):t.scrollTop=e)},scrolledToBottom:function(){return e.scrollContainer.clientHeight+e.scrollContainer.scrollTop===e.scrollContainer.scrollHeight},scrolledToLoadThreshold:function(){return e.scrollContainer&&e.scrollContainer.scrollTop<=e.props.loadOldMessagesThreshold},scrollTop:function(){return e.scrollContainer&&e.scrollContainer.scrollTop},scrollHeight:function(){return e.scrollContainer&&e.scrollContainer.scrollHeight},clientHeight:function(){return e.scrollContainer&&e.scrollContainer.clientHeight}})},className:i.default("react-bell-chat__chat-scroll-area",this.props.className,r.container),style:o({},l,void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{},void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{},a,this.props.style),onScroll:function(t){return e.scrollContainer&&e.scrollContainer.scrollTop<=e.props.loadOldMessagesThreshold&&e.props.onLoadOldMessages()}},this.props.children)},t}(n.Component);t.ChatScrollArea=u,t.default=u},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={width:20,height:20,lineHeight:"20px",fontWeight:400,fontSize:10,color:"white",backgroundColor:"rgb(153, 153, 153)",borderRadius:10,textAlign:"center",transition:"0.3s all ease-in-out",display:"block",position:"relative"},i={pointerEvents:"none"};t.default=function(e){var t=e.styles,s=e.classes;t||(t={}),s||(s={});var l=t.container,u=t.text;return e.author&&a.createElement("div",{style:r({},n,l,e.style),className:o.default("react-bell-chat__last-seen-avatar",e.className,s.container)},a.createElement("span",{style:r({},i,u),className:o.default("react-bell-chat__last-seen-avatar__text",s.text)},e.author.lastSeenAvatarName?e.author.lastSeenAvatarName:e.author.name[0].toUpperCase()))}},function(e,t,s){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},function(e,t){function s(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),o=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),i=s(2),l=s(4),u=s(13),c=s(3),p=s(1),h=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.renderGroup=function(e,t){var s=this,r=this.props.styles;r||(r={});var a=r.chatBubbleWrapper,c=this.props,h=c.bubblesCentered,d=c.bubbleStyles,f=c.lastSeenAvatarStyles,b=c.avatarStyles,g=c.classes,y=c.bubbleClasses,m=c.lastSeenAvatarClasses,v=c.avatarClasses,_=c.showRecipientAvatar,C=c.customChatBubble,O=c.customSystemChatBubble,S=c.showRecipientLastSeenMessage,w=c.customLastSeenAvatar,A=C||i.default,B=O||l.default,M=e.map(function(r,a){var i={yourAuthorId:s.props.yourAuthorId,author:t,message:r,bubblesCentered:h,styles:d,lastSeenAvatarStyles:f,classes:y,lastSeenAvatarClasses:m,isFirstInGroup:0===a,isLastInGroup:a===e.length-1&&e.length>1,isCenterInGroup:a<e.length-1&&e.length>1,lastSeenByAuthors:s.props.authors&&s.props.authors.filter(function(e){return void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===r.id}),showRecipientLastSeenMessage:S,customLastSeenAvatar:w};return void 0!==r.authorId?n.createElement(A,o({key:a},i)):n.createElement(B,o({key:a},i))}),L=t&&this.props.yourAuthorId===t.id;return n.createElement("div",{style:o({},u.default.chatBubbleWrapper,a,this.props.style),className:p.default("react-bell-chat__bubble-group",g&&g.chatBubbleWrapper,this.props.className)},!L&&_&&t&&this.props.customAvatar&&n.createElement(this.props.customAvatar,{author:this.props.author,styles:b,classes:v}),M)},t.prototype.render=function(){var e=this.props,t=e.messages,s=e.author;return this.renderGroup(t,s)},t.defaultProps={messages:[],author:void 0,customAvatar:c.default,showRecipientLastSeenMessage:!1},t}(n.PureComponent);t.default=h},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"};t.default=function(e){var t=e.styles,s=e.classes;t||(t={}),s||(s={});var i=t.container;return e.date&&a.createElement("div",{className:o.default("react-bell-chat__date-row",e.className,s.container),style:r({},n,i,e.style),title:e.date.toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})},e.date.toLocaleDateString())}},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={display:"flex",marginBottom:10},i="rgb(0, 132, 255)";t.default=function(e){var t=e.styles,s=e.classes;t||(t={}),s||(s={});var l=t.container,u=t.spinnerColor;return a.createElement("div",{className:o.default("react-bell-chat__loading-messages",e.className,s.container),style:r({},n,l,e.style)},a.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none",margin:"auto",fill:u||i,opacity:e.isVisible?1:0,transition:"0.3s all ease-in-out"}},a.createElement("title",null,"Loading messages"),a.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(2);t.ChatBubble=r.default;var a=s(3);t.Avatar=a.default;var o=s(5);t.IsTyping=o.default;var n=s(6);t.ChatScrollArea=n.default;var i=s(7);t.LastSeenAvatar=i.default;var l=s(8);t.BubbleGroup=l.default;var u=s(14);t.ChatFeed=u.default;var c=s(17);t.ChatInput=c.default;var p=s(4);t.SystemChatBubble=p.default;var h=s(9);t.DateRow=h.default;var d=s(10);t.LoadingMessages=d.default},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",backgroundColor:"#0084FF",borderRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:10,paddingLeft:14,paddingRight:14},userChatBubbleOrientationNormal:{marginRight:0},recipientChatBubbleOrientationNormal:{marginLeft:0},recipientChatBubble:{backgroundColor:"#ccc"},text:{color:"#FFFFFF",fontSize:16,fontWeight:300,margin:0,marginRight:30,whiteSpace:"pre"},userFirstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},userLastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},userCenterChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,color:"rgba(255, 255, 255, 0.55)"},isSend:{position:"absolute",right:2,bottom:2,fontSize:9},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"},loadingSpinnerColor:"rgba(255, 255, 255, 0.55)",isSendIconColor:"#cddc39"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={chatBubbleWrapper:{marginTop:10,marginBottom:10,position:"relative"}}},function(e,t,s){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},function(e,t){function s(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),o=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(a,o){function n(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?a(e.value):new s(function(t){t(e.value)}).then(n,i)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var s,r,a,o,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,r&&(a=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[0,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,r=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){n=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(6===o[0]&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],r=0}finally{s=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(0),u=s(8),c=s(2),p=s(15),h=s(3),d=s(5),f=s(6),b=s(7),g=s(16),y=s(9),m=s(10),v=s(4),_=s(1),C=function(e){return l.createElement(c.default,o({},e))},O=function(e){return l.createElement(f.default,o({},e))},S=function(e){function t(t){var s=e.call(this,t)||this;return s.onLoadOldMessages=s.onLoadOldMessages.bind(s),s.state={isLoadingMessages:!1},s}return a(t,e),t.prototype.onMessageSend=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},t.prototype.shouldComponentUpdate=function(e,t){return this.shallowDiffers(this.props,e)||this.shallowDiffers(this.state,t)},t.prototype.componentDidMount=function(){this.scrollApi&&this.scrollApi.scrollToBottom()},t.prototype.getSnapshotBeforeUpdate=function(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}},t.prototype.componentDidUpdate=function(e,t,s){if(this.props.messages.length!==e.messages.length&&s&&s.wasScrolledToBottom)this.scrollApi.scrollToBottom();else if(this.props.messages.length!==e.messages.length&&s&&t.isLoadingMessages){var r=this.scrollApi&&this.scrollApi.scrollHeight();this.scrollApi.scrollTo(r-s.scrollHeight)}},t.prototype.shallowDiffers=function(e,t){for(var s in e)if(!(s in t))return!0;for(var s in t)if(e[s]!==t[s])return!0;return!1},t.prototype.renderMessages=function(e){var t=this,s=this.props.styles;s||(s={});var r=this.props,a=r.bubbleStyles,o=r.bubbleClasses,n=r.dateRowStyles,i=r.dateRowClasses,c=r.avatarStyles,p=r.avatarClasses,h=r.lastSeenAvatarStyles,d=r.lastSeenAvatarClasses,f=r.bubbleGroupStyles,b=r.bubbleGroupClasses,y=this.props,m=y.customChatBubble,v=y.showRecipientAvatar,_=g.groupBy(e,function(e){return e.createdOn&&e.createdOn.toDateString()}),C=[],O=0;return Object.keys(_).forEach(function(e){var s=[],r=_[e];r[0]&&r[0].createdOn&&t.props.showDateRow&&C.push(l.createElement(t.props.customDateRow,{key:e,date:r[0].createdOn,styles:n,classes:i})),C=C.concat(r.map(function(e,n){if(s.push(e),!r[n+1]||r[n+1].authorId!==e.authorId){var i=s,g=t.props.authors&&t.props.authors.filter(function(t){return t.id===e.authorId})[0];return s=[],O++,l.createElement(u.default,{key:O,yourAuthorId:t.props.yourAuthorId,messages:i,author:g,authors:t.props.authors,showRecipientAvatar:v,customChatBubble:m,bubbleStyles:a,bubbleClasses:o,avatarStyles:c,avatarClasses:p,lastSeenAvatarStyles:h,lastSeenAvatarClasses:d,showRecipientLastSeenMessage:t.props.showRecipientLastSeenMessage,customAvatar:t.props.customAvatar,customLastSeenAvatar:t.props.customLastSeenAvatar,customSystemChatBubble:t.props.customSystemChatBubble,classes:b,styles:f})}return null}))}),C},t.prototype.renderIsTyping=function(){var e=this,t=this.props.styles;t||(t={});var s=this.props,r=s.isTypingStyles,a=s.isTypingClasses,o=this.props.authors&&this.props.authors.filter(function(t){return t.isTyping&&t.id!==e.props.yourAuthorId});return o&&0!==o.length?l.createElement(d.default,{typingAuthors:o,styles:r,classes:a}):null},t.prototype.render=function(){var e=this,t=this.props,s=t.styles,r=t.classes;s||(s={}),r||(r={});var a=this.props,n=a.loadingMessagesStyle,i=a.chatFeedStyles,u=a.chatScrollArea,c=a.loadingMessagesClasses,h=a.chatScrollAreaClasses;return l.createElement("div",{className:_.default("react-bell-chat__chat-panel",this.props.className,r.chatPanel),style:o({},p.default.chatPanel,i&&i.chatPanel,this.props.style)},l.createElement(this.props.customScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:function(t){return e.scrollApi=t},loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages,styles:u,classes:h},l.createElement("div",{style:o({},p.default.chatMessages,this.props.showRecipientAvatar&&p.default.showRecipientAvatarChatMessages,this.props.showRecipientAvatar&&s.showRecipientAvatarChatMessages,this.props.showIsTyping&&p.default.showIsTypingChatMessages,this.props.showIsTyping&&s.showIsTypingChatMessages,this.props.showRecipientLastSeenMessage&&p.default.showRecipientLastSeenMessageChatMessages,this.props.showRecipientLastSeenMessage&&s.showRecipientLastSeenMessageChatMessages),className:_.default("react-bell-chat__chat-messages",r.chatMessages,this.props.showRecipientAvatar&&r.showRecipientAvatarChatMessages,this.props.showIsTyping&&r.showIsTypingChatMessages,this.props.showRecipientLastSeenMessage&&r.showRecipientLastSeenMessageChatMessages)},l.createElement(this.props.customLoadingMessages,{isVisible:this.props.showLoadingMessages||this.state.isLoadingMessages,styles:n,classes:c}),this.renderMessages(this.props.messages),this.props.showIsTyping&&this.renderIsTyping())))},t.prototype.onLoadOldMessages=function(){var e=this;if(!this.state.isLoadingMessages&&this.props.hasOldMessages)return new Promise(function(t){e.setState({isLoadingMessages:!0},function(){return t()})}).then(function(){return n(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.props.onLoadOldMessages?[4,this.props.onLoadOldMessages()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}).then(function(){return n(e,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){e.setState({isLoadingMessages:!1},function(){e.scrollApi.scrolledToLoadThreshold()&&e.scrollApi.scrollTo(e.props.loadOldMessagesThreshold+1),t()})})];case 1:return t.sent(),[2]}})})})},t.defaultProps={messages:[],authors:[],customChatBubble:C,customAvatar:h.default,customScrollArea:O,customLastSeenAvatar:b.default,customDateRow:y.default,customLoadingMessages:m.default,yourAuthorId:0,loadOldMessagesThreshold:50,customSystemChatBubble:v.default},t}(l.Component);t.default=S},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={chatPanel:{display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden",position:"relative"},showRecipientAvatarChatMessages:{paddingLeft:50},showIsTypingChatMessages:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessageChatMessages:{paddingRight:30},chatMessages:{paddingBottom:10,paddingTop:10}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.groupBy=function(e,t){if("function"!=typeof t)throw new Error("groupBy take a function as only parameter");return e.reduce(function(e,s){var r=t(s);return e[r]||(e[r]=[]),e[r].push(s),e},{})}},function(e,t,s){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=s(0),o=s(1),n={flex:1},i={border:"none",borderTopWidth:"1",borderTopStyle:"solid",borderTopColor:"#ddd",fontSize:"16",outline:"none",padding:"30",width:"100%"};t.default=function(e){var t=e.styles,s=e.classes,l=e.inputPlaceholder;return t||(t={}),s||(s={}),a.createElement("div",{className:o.default("react-bell-chat__chat-input",e.className,s.chatInput),style:r({},n,t.chatInput)},a.createElement("input",{type:"text",className:o.default("react-bell-chat__chat-input__input",s.input),style:r({},i,t.input),placeholder:l}))}}])});
//# sourceMappingURL=index.min.js.map